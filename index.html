<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <title>WOLCAS</title>
  <link rel='stylesheet' href='css/app.css' />
  <script src='https://alcdn.msauth.net/browser/2.38.0/js/msal-browser.min.js'></script>
  <script type='module' src='js/ui.js'></script>
</head>
<body class='wolcas-body'>
<header class='app-header'>
  <img src='assets/logo.png' alt='WOLCAS' class='brand-logo' />
  <nav class='auth-nav'>
    <span id='userEmail' class='user-email'></span>
    <button id='btnSignIn'>Sign in</button>
    <button id='btnSignOut' class='hidden'>Sign out</button>
  </nav>
</header>
<main id='signedOutMain'>
  <section class='signin-card'>
    <h1>WOLCAS</h1>
    <p>Sign in to manage Projects & Tasks.</p>
    <button id='btnSignInCard'>Sign in</button>
  </section>
</main>
<main id='appMain' class='hidden'>
  <section id='dashboard'>
    <h2>Dashboard</h2>
    <div class='stats-row'>
      <div class='stat'><h3>Total Projects</h3><span id='statTotalProjects'>–</span></div>
      <div class='stat'><h3>Active Projects</h3><span id='statActiveProjects'>–</span></div>
      <div class='stat'><h3>Completed Projects</h3><span id='statCompletedProjects'>–</span></div>
      <div class='stat'><h3>Total Costs (tasks)</h3><span id='statTotalCosts'>–</span></div>
      <div class='stat'><h3>Total Sales (expected)</h3><span id='statTotalSales'>–</span></div>
    </div>
  </section>
  <section id='projects'>
    <h2>Projects</h2>
    <button id='btnAddProject' class='rbac-not-viewer'>Add Project</button>
    <table id='projectTable'>
      <thead><tr>
        <th>Title</th><th>Owner</th><th>Start Date</th><th>Expected Sales</th><th>Active</th><th>Actions</th>
      </tr></thead>
      <tbody></tbody>
    </table>
    <dialog id='projectModal'>
      <form id='projectForm'>
        <label>Title <input name='Title' required></label>
        <label>Owner <input name='Owner'></label>
        <label>Start Date <input type='date' name='StartDate'></label>
        <label>Expected Sales <input type='number' step='0.01' name='ExpectedSales'></label>
        <label class='checkbox'>Active <input type='checkbox' name='Active'></label>
        <menu>
          <button type='submit' id='btnSaveProject'>Save</button>
          <button type='button' id='btnDeleteProject' class='rbac-admin'>Delete</button>
          <button type='button' id='btnCloseProject'>Close</button>
        </menu>
      </form>
    </dialog>
  </section>
  <section id='tasks'>
    <h2>Tasks</h2>
    <button id='btnAddTask' class='rbac-not-viewer'>Add Task</button>
    <table id='taskTable'>
      <thead><tr>
        <th>Title</th><th>Address</th><th>Start Date</th><th>End Date</th><th>Quantity</th><th>Unit Cost</th><th>Total Cost</th><th>Allocation</th><th>Sprint</th><th>Assignee</th><th>Actions</th>
      </tr></thead>
      <tbody></tbody>
    </table>
    <dialog id='taskModal'>
      <form id='taskForm'>
        <label>Title <input name='Title' required></label>
        <label>Address <input name='Address'></label>
        <label>Start Date <input type='date' name='StartDate'></label>
        <label>End Date <input type='date' name='EndDate'></label>
        <div class='row'>
          <label>Quantity <input type='number' step='0.01' name='Quantity'></label>
          <label>Unit Cost <input type='number' step='0.01' name='UnitCost'></label>
          <label>Total Cost <input type='number' step='0.01' name='TotalCost'></label>
          <label class='rbac-admin'>Allocation <input type='number' step='0.01' name='Allocation'></label>
        </div>
        <label>Sprint <input name='Sprint'></label>
        <label>Assignee <input name='Assignee'></label>
        <label>Description <textarea name='Description'></textarea></label>
        <label>Notes <textarea name='Notes'></textarea></label>
        <div>
          <label>Photos <input type='file' id='taskPhotos' multiple accept='image/*'></label>
        </div>
        <menu>
          <button type='submit' id='btnSaveTask'>Save</button>
          <button type='button' id='btnDeleteTask' class='rbac-admin'>Delete</button>
          <button type='button' id='btnCloseTask'>Close</button>
        </menu>
      </form>
    </dialog>
  </section>
</main>
</body>
</html>